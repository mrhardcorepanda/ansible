---
- hosts: all
  tasks:
  - name: install httpd
    yum: name=httpd state=latest
    notify: add_index
  - name: install firewalld
    yum: name=firewalld state=latest
  - name: start firewalld service
    service: name=firewalld state=started
  - name: open ports
    firewalld: port=80/tcp state=enabled
  - name: start httpd service
    service: name=httpd state=started
  handlers:
  - name: remove file
    file: state=absent path=/var/www/html/index.html
    listen: delete_index